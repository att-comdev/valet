heat_template_version: 2015-04-30

description: host level diversity - basic - 2 instances

resources:

  my-instance-11:
    type: OS::Nova::Server
    properties:
      name: test-11
      #key_name: mykey
      image: cirros-0.3.4-x86_64-disk.img
      flavor: m1.tiny
      #networks:
        #- network: 0c405776-0c37-4212-a814-e8aa539b32b5

  my-instance-12:
    type: OS::Nova::Server
    properties:
      name: test-12
      #key_name: mykey
      image: cirros-0.3.4-x86_64-disk.img
      flavor: m1.tiny
      #networks:
        #- network: 0c405776-0c37-4212-a814-e8aa539b32b5

  test-affinity-group5:
    type: ATT::Valet::GroupAssignment
    properties:
      group_type: diversity 
      level: host
      resources:
      - {get_resource: my-instance-11}
      - {get_resource: my-instance-12}
  
outputs:
  instance_ip-1:
    description: The IP addresses of the deployed instance 1
    value: { get_attr: [my-instance-11, first_address] }
  instance_ip-2:
    description: The IP addresses of the deployed instance 2
    value: { get_attr: [my-instance-12, first_address] }
