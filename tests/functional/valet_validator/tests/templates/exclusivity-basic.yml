heat_template_version: 2015-04-30

description: Exclusivity template 1 - should reserve a host for the exclusivity group and place the vm there. 

resources:

  my-instance-3:
    type: OS::Nova::Server
    properties:
      name: test-3
      #key_name: my_key
      image: cirros-0.3.4-x86_64
      flavor: m1.tiny

  my-instance-4:
    type: OS::Nova::Server
    properties:
      name: test-4
      #key_name: my_key
      image: cirros-0.3.4-x86_64
      flavor: m1.tiny


  test-exclusivity-group34:
    type: ATT::Valet::GroupAssignment
    properties:
      group_name: group5
      group_type: exclusivity 
      level: host
      resources:
      - {get_resource: my-instance-3}
      - {get_resource: my-instance-4}


outputs:
  instance_ip-3:
    description: The IP addresses of the deployed instance 3
    value: { get_attr: [my-instance-3, first_address] }
  instance_ip-4:
    description: The IP addresses of the deployed instance 4
    value: { get_attr: [my-instance-4, first_address] }
